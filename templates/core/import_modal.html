{% extends "theme/base.html" %}

{% block title %}{{ title }}{% endblock %}
{% block page_title %}{{ title }}{% endblock %}
{% block breadcrumb %}<li class="breadcrumb-item active">{{ title }}</li>{% endblock %}

{% block content %}
<div class="card wis-form-card">
  <div class="card-header">
    <h3 class="card-title"><i class="fas fa-file-import mr-2"></i>{{ title }}</h3>
  </div>
  <form method="post" action="{% url import_url %}" enctype="multipart/form-data" novalidate>
    {% csrf_token %}
    <input type="hidden" name="_modal" value="1">
    <div class="card-body py-4 px-4">
      <div class="alert alert-info d-flex align-items-center py-2 mb-3" role="alert">
        <i class="fas fa-info-circle fa-lg mr-2"></i>
        <div>
          <strong>Step 1:</strong> Download the CSV template below.<br>
          <strong>Step 2:</strong> Fill in your data and upload the CSV file.
        </div>
      </div>

      <div class="form-group mb-3">
        <label for="csv_file" class="form-label"><strong>Select CSV File</strong> <span class="text-danger">*</span></label>
        <input type="file" class="form-control form-control-sm" id="csv_file" name="csv_file" accept=".csv" required>
        <small class="form-text text-muted mt-1">
          Accepted format: <code>.csv</code> (UTF-8 encoded). Max recommended: 5,000 rows per import.
        </small>
      </div>

      <div class="card card-outline card-secondary mt-3">
        <div class="card-header py-2">
          <h6 class="card-title mb-0"><i class="fas fa-lightbulb mr-1 text-warning"></i> Import Tips</h6>
        </div>
        <div class="card-body">
          <ul class="mb-0 small">
            <li>Use the exact column headers from the template</li>
            <li>Date format: YYYY-MM-DD (e.g., 2024-01-15)</li>
            <li>Leave optional fields blank if not applicable</li>
            <li>Existing records with matching codes will be updated</li>
          </ul>
        </div>
      </div>
    </div>
    <div class="card-footer d-flex justify-content-end gap-2">
      <a href="{% url template_url %}" class="btn btn-outline-success btn-sm mr-auto">
        <i class="fas fa-file-csv mr-1"></i> Download CSV Template
      </a>
      <button type="submit" class="btn btn-primary btn-sm">
        <i class="fas fa-upload mr-1"></i> Import CSV
      </button>
    </div>
  </form>
</div>
{% endblock %}
