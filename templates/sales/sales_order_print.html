{% extends "theme/partials/doc_print.html" %}
{% load humanize %}

{% block doc_header_info %}
<p>Date: {{ doc.order_date|date:"F d, Y" }}</p>
{% if doc.delivery_date %}<p>Delivery: {{ doc.delivery_date|date:"F d, Y" }}</p>{% endif %}
<p>Fulfillment: {{ doc.get_fulfillment_type_display }}</p>
{% if doc.currency != 'PHP' %}<p>Currency: {{ doc.currency }} (Rate: {{ doc.exchange_rate }})</p>{% endif %}
{% endblock %}

{% block info_boxes %}
<div class="info-box">
  <strong>Customer</strong>
  {{ doc.customer.name }}<br>
  {% if doc.customer.contact_person %}{{ doc.customer.contact_person }}<br>{% endif %}
  {% if doc.customer.phone %}{{ doc.customer.phone }}<br>{% endif %}
  {% if doc.customer.email %}{{ doc.customer.email }}{% endif %}
</div>
<div class="info-box" style="text-align:right;">
  <strong>Warehouse</strong>
  {{ doc.warehouse.name }}<br>
  {{ doc.warehouse.code }}
  {% if doc.shipping_address %}<br><br><strong style="display:block;margin-bottom:4px;color:#555;font-size:11px;text-transform:uppercase;letter-spacing:1px;">Ship To</strong>{{ doc.shipping_address }}{% endif %}
</div>
{% endblock %}

{% block doc_table %}
<table>
  <thead>
    <tr><th>#</th><th>Item Code</th><th>Description</th><th class="text-right">Qty</th><th>Unit</th><th class="text-right">Unit Price</th><th class="text-right">Total</th></tr>
  </thead>
  <tbody>
    {% for line in doc.lines.all %}
    <tr>
      <td>{{ forloop.counter }}</td>
      <td>{{ line.item.code }}</td>
      <td>{{ line.item.name }}</td>
      <td class="text-right">{{ line.qty_ordered|floatformat:2 }}</td>
      <td>{{ line.unit.abbreviation }}</td>
      <td class="text-right">{{ line.unit_price|floatformat:2|intcomma }}</td>
      <td class="text-right"><strong>{{ line.line_total|floatformat:2|intcomma }}</strong></td>
    </tr>
    {% endfor %}
  </tbody>
</table>
<table class="totals" style="width:300px;margin-left:auto;">
  <tr><td class="text-right grand">TOTAL ({{ doc.currency }})</td><td class="text-right grand">{% with lines=doc.lines.all %}{% for l in lines %}{% if forloop.last %}{{ l.line_total|floatformat:2|intcomma }}{% endif %}{% endfor %}{% endwith %}</td></tr>
</table>
{% endblock %}
